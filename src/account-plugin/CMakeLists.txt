# Build and install the files for the production plugin

set(EVERNOTE_ACCOUNT_DISPLAY_NAME Evernote)
set(EVERNOTE_ACCOUNT_NAME evernote)
set(EVERNOTE_HOSTNAME https://www.evernote.com)

set(EVERNOTE_PROVIDER_ID ${EVERNOTE_ACCOUNT_NAME})
set(EVERNOTE_SERVICE_ID ${EVERNOTE_ACCOUNT_NAME})
set(EVERNOTE_ICON_NAME ${EVERNOTE_ACCOUNT_NAME})

set(ICON data/icons/${EVERNOTE_ICON_NAME}.png)
set(PROVIDER_FILE data/providers/${EVERNOTE_ACCOUNT_NAME}.provider)
set(SERVICE_FILE data/services/${EVERNOTE_ACCOUNT_NAME}.service)
set(QML_PLUGIN_DIR ${CMAKE_INSTALL_DATADIR}/accounts/qml-plugins)

set(ICON_DIR ${CMAKE_INSTALL_DATADIR}/icons/hicolor/32x32/apps)
set(PROVIDER_DIR ${CMAKE_INSTALL_DATADIR}/accounts/providers)
set(SERVICE_DIR ${CMAKE_INSTALL_DATADIR}/accounts/services)

install(FILES ${ICON} DESTINATION ${ICON_DIR})

configure_file(${PROVIDER_FILE}.in ${CMAKE_CURRENT_BINARY_DIR}/${PROVIDER_FILE})
install(FILES ${CMAKE_CURRENT_BINARY_DIR}/${PROVIDER_FILE}
        DESTINATION ${PROVIDER_DIR})

configure_file(${SERVICE_FILE}.in ${CMAKE_CURRENT_BINARY_DIR}/${SERVICE_FILE})
install(FILES ${CMAKE_CURRENT_BINARY_DIR}/${SERVICE_FILE}
        DESTINATION ${SERVICE_DIR})

file(GLOB_RECURSE QML_FILES
     RELATIVE ${CMAKE_CURRENT_SOURCE_DIR}
     qml/**.qml)
install(FILES ${QML_FILES} DESTINATION ${QML_PLUGIN_DIR}/${EVERNOTE_ACCOUNT_NAME})

# Build and install the files for the sandbox plugin

set(EVERNOTE_ACCOUNT_DISPLAY_NAME "Evernote Developer Sandbox")
set(EVERNOTE_ACCOUNT_NAME evernote-sandbox)
set(EVERNOTE_HOSTNAME https://sandbox.evernote.com)
set(EVERNOTE_CONSUMER_KEY ${EVERNOTE_SANDBOX_CONSUMER_KEY})
set(EVERNOTE_CONSUMER_SECRET ${EVERNOTE_SANDBOX_CONSUMER_SECRET})

set(EVERNOTE_PROVIDER_ID ${EVERNOTE_ACCOUNT_NAME})
set(EVERNOTE_SERVICE_ID ${EVERNOTE_ACCOUNT_NAME})
set(EVERNOTE_ICON_NAME ${EVERNOTE_ACCOUNT_NAME})

set(PROVIDER_FILE_SANDBOX data/providers/${EVERNOTE_ACCOUNT_NAME}.provider)
set(SERVICE_FILE_SANDBOX data/services/${EVERNOTE_ACCOUNT_NAME}.service)
set(QML_PLUGIN_DIR ${CMAKE_INSTALL_DATADIR}/accounts/qml-plugins)

install(FILES ${ICON}
        DESTINATION ${ICON_DIR}
        RENAME ${EVERNOTE_ACCOUNT_NAME}.png)

configure_file(${PROVIDER_FILE}.in ${CMAKE_CURRENT_BINARY_DIR}/${PROVIDER_FILE_SANDBOX})
install(FILES ${CMAKE_CURRENT_BINARY_DIR}/${PROVIDER_FILE_SANDBOX}
        DESTINATION ${PROVIDER_DIR})

configure_file(${PROVIDER_FILE}.in ${CMAKE_CURRENT_BINARY_DIR}/${PROVIDER_FILE_SANDBOX})
install(FILES ${CMAKE_CURRENT_BINARY_DIR}/${PROVIDER_FILE_SANDBOX}
        DESTINATION ${PROVIDER_DIR})

configure_file(${SERVICE_FILE}.in ${CMAKE_CURRENT_BINARY_DIR}/${SERVICE_FILE_SANDBOX})
install(FILES ${CMAKE_CURRENT_BINARY_DIR}/${SERVICE_FILE_SANDBOX}
        DESTINATION ${SERVICE_DIR})

file(GLOB_RECURSE QML_FILES
     RELATIVE ${CMAKE_CURRENT_SOURCE_DIR}
     qml/**.qml)
install(FILES ${QML_FILES} DESTINATION ${QML_PLUGIN_DIR}/${EVERNOTE_ACCOUNT_NAME})
